<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
  <title>Rock, Paper, Scissors!</title>
</head>
<body>
  <script>
      function playRound(playerSelection, computerSelection) {
        // check that the play entry is valid
        if (!selections.includes(playerSelection.toLowerCase())) {
          return 'Invalid input. Enter rock, paper or scissors.'
        }
        // convert to lower case so input case doesn't matter
        let player = playerSelection.toLowerCase();
        let computer = computerSelection.toLowerCase();
        // draw
        if (player === computer) {
          console.log(`This round is a draw! ${playerSelection} equals ${computerSelection}.`);
          alert(`This round is a draw! ${playerSelection} equals ${computerSelection}.`);
          return `draw`;
        }
        else {
          // win/lose conditions
          let diff = selections.indexOf(player) - selections.indexOf(computer);
          if ((diff == -1) || (diff == 2)) {
            console.log(`You Lose this round! ${playerSelection} loses to ${computerSelection}.`);
            alert(`You Lose this round! ${playerSelection} loses to ${computerSelection}.`);
            return `lose`;
          }
          else {
            console.log(`You Win this round! ${playerSelection} beats ${computerSelection}.`);
            alert(`You Win this round! ${playerSelection} beats ${computerSelection}.`);
            return `win`;
          }       
        }
      }

    function computerPlay() {
      // pick a random number from 0 - 2 (array locations)
      let pick = Math.floor(Math.random() * 3);
      // return the pick at the randomly selected array location
      return selections[pick];
    }

    function game(roundsToPlay) {
      // reset game parameters
      playerScore = 0;
      computerScore = 0;
      playerChoice = '';
      computerChoice = '';
      gameResult = 0;
      for (let i = 0; i < roundsToPlay; i++) {
        playerChoice = prompt(`Round ${i + 1}/${roundsToPlay}\nType rock, paper or scissors!`);
        while (!selections.includes(playerChoice.toLowerCase())) {
          playerChoice = prompt(`Round ${i + 1}/${roundsToPlay}\nYou must enter rock, paper or scissors!`);
        }
        computerChoice = computerPlay();
        gameResult = playRound(playerChoice, computerChoice)
        if (gameResult === 'win') {
          playerScore++;
        }
        else if (gameResult === 'lose') {
          computerScore++;
        }
        else {
          playerScore++;
          computerScore++;
        }
        console.log(`Round ${i + 1} score: ${playerScore} - ${computerScore}.\n\n`)
        alert(`Round ${i + 1} score: ${playerScore} - ${computerScore}.`)
        playerChoice = '';
      }
      if (playerScore > computerScore) {
        console.log(`Congratulations! You Won the Game!`);
        alert(`Congratulations! You Won the Game!`);
      }
      else if (playerScore < computerScore) {
        console.log(`Unfortunately! You Lost the Game! Better luck next time!`);
        alert(`Unfortunately! You Lost the Game! Better luck next time!`);
      }
      else {
        console.log(`The Game is a Draw!`);
        alert(`The Game is a Draw!`);
      }
      console.log(`Final score: ${playerScore} : ${computerScore}.`);
      alert(`Final score: ${playerScore} : ${computerScore}.`);

    }
    // game parameters to track
    let playerScore;
    let computerScore;
    let playerChoice;
    let computerChoice;
    let gameResult;
    const minRounds = 1;
    const maxRounds = 50;
    // define the three possible options in an array
    const selections = ['rock', 'paper', 'scissors'];
    let numberOfRounds = Number(prompt(`How many rounds would you like to play? (${minRounds} - ${maxRounds})`, 5));
    while (numberOfRounds < minRounds || numberOfRounds > maxRounds || isNaN(numberOfRounds)) {
      numberOfRounds = Number(prompt(`You must enter the number between ${minRounds} and ${maxRounds}`));
    }
    game(numberOfRounds);

  </script>
</body>
</html>
